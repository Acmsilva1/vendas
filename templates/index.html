<script>
    // ... dentro da função update() ...
    
    // Novo Gráfico: Produtividade por Dia
    const labelsP = Object.keys(d.produtividade_dia);
    const valuesP = Object.values(d.produtividade_dia);
    if(chartP) chartP.destroy();
    chartP = new Chart(document.getElementById('chartProd'), {
        type: 'bar',
        data: { 
            labels: labelsP, 
            datasets: [{ label: 'Vendas por Dia', data: valuesP, backgroundColor: '#3498db' }] 
        },
        options: { scales: { y: { beginAtZero: true, ticks: { color: '#fff' } }, x: { ticks: { color: '#fff' } } } }
    });

    // Mostrar o Delta
    const deltaEl = document.getElementById('delta_vendas');
    deltaEl.innerText = (d.delta_vendas_mes >= 0 ? "+" : "") + d.delta_vendas_mes + "% vs mês ant.";
    deltaEl.style.color = d.delta_vendas_mes >= 0 ? "#2ecc71" : "#e74c3c";
</script>
